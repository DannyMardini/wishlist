var wishlist_div="#div_wishlist_div";$(document).ready(function(){setupWishlist();checkGranted()});function setupWishlist(){$("#wishlist_bs_table").tablecloth({theme:"default",striped:true,sortable:true,bordered:true});$("#addItemButton").button({icons:{primary:"ui-icon-plusthick"},text:false}).click(function(a){a.preventDefault();$("#amazonSearchDialog").dialog("open")});$("#addItemButton").css("height","25");$(".purchaseBtn").on("click",clickedItem)}function deleteLoadedItem(){confirm("Are you sure you want to delete this wish?").then(function(c){if(c==1){var b=$("#editItemDialog #itemId").val();var a={itemId:b};delFromWishlist(a,setupWishlist)}})}function clickedItem(){selected_itemId=$(this).attr("id");getItemInfo(selected_itemId,function(a){openAddToShoppingListDialog(a)})}function getItemInfo(b,a){$.ajax({type:"POST",url:Routing.generate("WishlistCoreBundle_getItemInfo"),data:{id:b}}).success(function(c){if(c){a(c)}})}function onUpdateWishItemClick(b){var a=Routing.generate("WishlistListBundle_wishlistUpdate");confirm("Are you sure you want to save these changes?").then(function(d){if(d==1){var c=getItemDialogObj(b);submitTheWish(c,a,onCompleteUpdateItemEvent,b)}})}function onCompleteUpdateItemEvent(a,b){switch(b.toLowerCase()){case"success":setupWishlist();popupMessage("Yay!","The item has been updated!");break;default:popupMessage("Sorry!","The item could not be updated. Please try again later.");break}}function checkGranted(){var a=getIds($("#grantedWishes div"));if(a.length>0){var b="Your wishes have been granted! The following items have been removed from your wishlist:";b+=$("#grantedWishes").html();popupMessage("Wishes Granted",b,function(){var c=Routing.generate("WishlistListBundle_grantedItemNotified");ajaxPost({notifiedItems:a},c)})}};
function unfriendUser(c){var a=parseInt($("#userId").val(),10);var b=function(){window.location=Routing.generate("WishlistUserBundle_homepage")};confirm("Are you sure you want to remove this friend?").then(function(d){if(d==1){ajaxPost({userid:a},Routing.generate("WishlistUserBundle_unfriend"),function(e,f){if(e.toLowerCase()=="success"){popupMessage("Success","User successfully unfriended.",b)}else{popupMessage("Failure","An unexpected error occurred, please try again later.")}})}})}$(document).ready(function(){$("#unfriendButton").click(unfriendUser)});