$(document).ready(function(){$("#shoppingList_bs_table").tablecloth({theme:"default",striped:true,sortable:true,bordered:true});createGUIButtons();createEventHandlers();toggleRetractButton();checkCompleted()});function checkCompleted(){var a=getIds($("#expiredPurchases div"));if(a.length>0){confirm("Hey, you have wishes you should have fulfilled by now, would you like to remove them from your shopping list?").then(function(c){if(c==1){var b=Routing.generate("WishlistListBundle_completeShoppingListItems");ajaxPost({expiredPurchases:a},b,function(){location.reload()})}})}}function createGUIButtons(){$("#retractPurchaseButton").button({icons:{primary:"ui-icon-minusthick"},text:false}).click(retractPurchaseEvent);$("#retractPurchaseButton").css("height","25")}function createEventHandlers(){$(".selectItem").click(function(a){toggleSelectedItem(this)})}function toggleSelectedItem(a){$(a).toggleClass("selected");var b=$(".selectItem",a);b.attr("checked",!b.attr("checked"));toggleRetractButton()}function toggleRetractButton(){var b=$("#retractPurchaseButton");var a=$("#shoppinglist .selected");a.length<=0?b.hide():b.show()}function retractPurchaseEvent(){confirm("Are you sure you want to remove the selected purchases?").then(function(a){if(a==1){continueRemovingItems()}})}function continueRemovingItems(){var d=$(".selected","#shoppinglist");var c=d.parents("tr");var a=d.map(function(){return this.id}).get();var b={purchaseIds:a};ajaxPost(b,Routing.generate("WishlistListBundle_retractPurchases"),finishRetractPurchaseEvent,c)}function finishRetractPurchaseEvent(a,d,c,b){if(a==null){return}if(a.length<=0){b.remove();updateItemCount();toggleRetractButton()}else{popupMessage("An Issue Occurred!","<p>"+a+"</p>")}}function updateItemCount(){var a=$("#shoppinglist .shoppinglistitem").length;if(a<0){a=0}$(".shoppinglist-header-label").attr("id","shoppinglist_count_"+a).text("Shopping List ( "+a+" )")};