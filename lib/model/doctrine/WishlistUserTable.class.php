<?php

/**
 * WishlistUserTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class WishlistUserTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object WishlistUserTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('WishlistUser');
    }    
    
    public static function addWishlistUser( $email )
    {
       $new_wishlistUser = new WishlistUser();
       $new_wishlistUser->setEmail($email);
       $new_wishlistUser->setName('Blanca Edmiston');
       $new_wishlistUser->setGender(1);
       $new_wishlistUser->setAge(50);
       $new_wishlistUser->setPassword('iLoveBob');
       $new_wishlistUser->save();
    }
    
    /**
     * Returns the wishlistuserID if the user is found.
     *
     * @return integer
     */
    public function validateEmailAndPassword( $email, $password )
    {
        try
        {                                                    
            $userQueryResults = $this->createQuery('w')
                ->where('w.email = ?', $email)
                    ->andWhere('w.password = ?', $password)->execute();
            
            $userId = 0;
                        
            foreach ($userQueryResults as $user)
            {
                $userId = $user->getWishlistuserId();
            }        
            
            return $userId;
        }catch(Exception $e)
        {
            return 0;
        }
    }
}